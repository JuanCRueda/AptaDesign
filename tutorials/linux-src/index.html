<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>AptaDesign</title>
    <link rel='icon' type='image/png' href='images/logo.png'/>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime&family=Open+Sans&family=Roboto:ital,wght@1,700&family=Ubuntu:ital,wght@1,700&display=swap" rel="stylesheet">
  </head>
<body>
  <script src="js/jquery-2.1.4.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/ajax-utils.js"></script>
  <script src="js/script.js"></script>
  <header>
    <nav id="header-nav" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a href="../../index.html" id='nav-img' class="pull-left visible-md visible-lg">
            <div id="logo-img" alt="Logo image"></div>
          </a>

          <div class="navbar-brand">
            <a href="../../index.html"><h1 id='nav-title'>AptaDesign</h1></a>
          </div>

          <button id="navbarToggle" type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#collapsable-nav" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div id="collapsable-nav" class="collapse navbar-collapse">
           <ul id="nav-list" class="nav navbar-nav navbar-right">
            <li>
              <a href="../../index.html" id='Button'>
                <span class="glyphicon glyphicon-home"></span> <br class="hidden-xs">Home</a>
            </li>
            <li>
              <a href="../../documentation/index.html" id='Button'>
                <span class="glyphicon glyphicon-book"></span><br class="hidden-xs"> Documentation</a>
            </li>
            <li class="active">
              <a href="../../tutorials/index.html" id='Button'>
                <span class="glyphicon glyphicon-education"></span><br class="hidden-xs"> Tutorials</a>
            </li>
            <li>
              <a href="../../downloads/index.html" id='Button'>
                <span class="glyphicon glyphicon-cloud-download"></span><br class="hidden-xs">Downloads</a>
            </li>
          </ul><!-- #nav-list -->
        </div><!-- .collapse .navbar-collapse -->
      </div><!-- .container -->
    </nav><!-- #header-nav -->
  </header>

  <h1 id='main-title' class='text-center'>How to use the source code for Linux?</h1>
  <div id="main-content" class="container">
    <div id='titles' class='row'>
      <div class='col-md-6'>
        <div id='contents' class='single-element'>
          <h3 id='sec-title' class='text-center'>Contents</h3>
          <ul>
            <li>
              <a href='#Installation'>1. Installation</a>
              <br>
              <ul>
                <li><a href='#download'>1.1. Contents of the download bundle</a></li>
                <li><a href="#Set-Up">1.2. Setting up the environment</a></li>
                <li><a href='#install'>1.3. Installing the software</a></li>
                <li><a href='#test'>1.4. Testing the installation</a></li>
              </ul>
            </li>
            <li>
              <a href='#Usage'>2. Usage</a>
              <br>
              <ul>
              <li><a href='#interface'>2.1. Using the interface mode</a></li>
              <li><a href='#function'>2.2. Using the function mode</a>
                <br>
                <ul><li><a href='#options'>2.2.1. Options and Arguments</a></li></ul>
              </li>
              <li><a href='#output'>2.3. Output</a>
            </ul>
            </li>
          </ul>
        </div>
      </div>
      <div class='col-xs-12'>
        <div id='Installation' class='single-element'>
          <h3 id='sec-title' class='text-center'>Installaton</h3>
          <div id='download'>
            <span class='subtitle'>1.1. Contents of the download bundle</span>
            <p>
              To begin please download the <a href='../../downloads'>scource code distribution bundle</a>. The download bundle contains the following files, which will be required during the installation and for the succeful run of the program.  The files are:<br>
              <ul>
                <li><b>AptaDesign.py:</b> the Python source code for this software tool.</li>
                <li><b>Examples folder: </b>a series of premade files that will be used for testing the installation<ul>
                  <li><b>Fc_Aptamers.fasta:</b> A fasta file containing the compilation of aptamers previously reported in literature specific for the Fc stem of mammalian IgG. This file contains the aptamers reported by <a href='https://doi.org/10.1016/S1872-2040(20)60016-0' target='_blank'>Yang <i>et al.</i> (2020)</a>, <a href='https://dx.doi.org/10.1261%2Frna.1005808' target='_blank'>Miyakawa <i>et al.</i> (2008)</a>, <a href='https://doi.org/10.3390/ijms21165748' target='_blank'>Bognár & Gyurcsányi (2020)</a>, <a href='https://doi.org/10.1016/j.cplett.2019.136854' target='_blank'>Yoshida <i>et al.</i> (2019)</a> and <a href='https://doi.org/10.4238/2013.april.25.11' target='_blank'>Ma <i>et al.</i> (2013)</a>.</li>
                  <li><b>HRP_DNAzyne.txt:</b> The seuqnece of a HRP-mimicking DNAzyme, previously reported by <a href='https://doi.org/10.1007/10_2017_37' target='_blank'>Alizadeh <i>et al.</i> (2020)</a>.</li></ul>
                </li>
                <li><b>requirements.txt:</b> The list of the required Python modules for this software tool</li>
                <li><b>viennarna_2.4.17-1_amd64.deb:</b> Installation file for the <a href='https://www.tbi.univie.ac.at/RNA/' target='_blank'>ViennaRNA Package</a>, which it is used by this software for MFE calculation and secondary structure predeiction.</li>
                <li><b>RNAhybrid-2.1.2:</b> Installation file for <a href='https://bibiserv.cebitec.uni-bielefeld.de/rnahybrid' target='_blank'>RNAhybrid</a> software tool. It is used by this software tool for hybridation MFE calculation.</li>
                <li><b>LICENSE:</b> License information for this sofwtare tool. This software tool is licensed under the MIT license.</li>
                <li><b>README.md:</b> Short description of this software tool with instructions on how to use it.</li>
              </ul>
            </p>
          </div>
          <br>
          <div id='Set-Up'>
            <span class='subtitle'>1.2. Setting up the environment</span>
            <p>
              This software tool requires Python 3.5 or supperior, to verify the Python installation run the following command:</p>
            <div class='code-block'>$ python3 --version</div>
            <p>Which shloud output something similar to:</p>
            <div class='code-block'>Python 3.8.5</div>
            <p>If there is no Python installation present or if it is inferior to Python 3.5, please install a more recent Python distribution.</p>
            <p>If Python is installed, skip to the <a href='#after-python'>next step</a>.</p>
            <p>Install python by typing the following commands in order:</p>
            <div class='code-block'>$ sudo apt update<br>
              $ sudo apt install software-properties-common<br>
              $ sudo add-apt-repository ppa:deadsnakes/ppa<br>
              $ sudo apt update<br>
              $ sudo apt install python3.8
            </div>
            <p>After it is finished installing, make sure it is ready by running:</p>
            <div class='code-block'>$python3 --version</div>
            <br>
            <p id='after-python'>For the installation of the software we will need PIP, please make sure that PIP is installed by running the following command:</p>
            <div class="code-block">$ pip3 --version</div>
            <p>Which should output something similar to:</p>
            <div class='code-block'>pip 9.0.1 from /usr/lib/...</div>
            <p>If there is already a pip installation, <a href='#after-pip'>skip to the next step</a>.</p>
            <p>If there is no PIP installation availible, please install it by running the following command:</p>
            <div class="code-block">$ sudo apt install python3-pip</div>
            <p>And make sure it is installed by running:</p>
            <div class='code-block'>$pip3 --version</div>
            <br>
            <p id='after-pip'>The next step consists on setting up the Vienna_RNA package, since it is requiered by this software tool. If you have already installed it, <a href='#after-vienna'>skip to the next step</a>.</p>
            <p>In order to installed, extract the contents of the compressed download bundle, search for the file "viennarna_2.4.17-1_amd64.deb".  Open it and click install.</p>
            <p>Make sure that it is installed by running:</p>
            <div class='code-block'>$ RNAfold</div>
            <p>Whose output should look like:</p>
            <div class="code-block">Input string (upper or lower case); @ to quit<br>
              ....,....1....,....2....,....3....,....4....,....5....,....6....,....7....,....8
            </div>
            <p>Close it by typing "@"</p>
            <br>
            <p id='after-vienna'>Also, the software tool requieres the installation of RNAhybrid software. If you have already installed it, <a href='#install'>skip to the next step</a>.</p>
            <p>In order to install it. Open a terminal in the folder RNAhybrid-2.1.2 and type the following commands in order:</p>
            <div class='code-block'>$ ./configure<br>
              $ make<br>
              $ sudo make install
            </div>
            <p>Make sure RNAhybrid is installed by typing:</p>
            <div class="code-block">$ RNAhybrid -h</div>
            <p>Which should give an output like:</p>
            <div class="code-block">Usage: RNAhybrid [options] [target sequence] [query sequence].<br><br>options:...</div>
          </div>
          <br>
          <div id='install'>
            <span class='subtitle'>1.3. Installing the software</span>
            <p>To avoid interference with other packages installed, it is suggested to create a python environment for the following part of the tutorial</p>
            <ol>
              <li>Open a terminal in the directory where the files where extracted.</li>
              <li>Run the following command:</li></ol>
            <div class='code-block'>$ pip3 install -r requirements.txt</div>
            <p>After this the installation should be ready.</p>
          </div>
          <br>
          <div id='test'>
            <span class='subtitle'>1.4. Testing the installation</span>
            <p>In orther to test that the installation was succefull, in a command line within the folder conatining the downloaded files, please run the following command:</p>
            <div class='code-block'>$ python3 -c "from AptaDesign import AptaDesign; AptaDesign(fasta_file='./examples/Fc_Aptamers.fasta', n_gen=2, Hybridation_target='GTGGGGCATTGTGGGTGGGTGTGG', output_path='<b>&ltYour desired output path&gt</b>', outout_name='test.1')"</div>
            <p>Which should output after a few seconds something similar to:</p>
            <div class='code-block'>Welcome to AptaDesign v1.0.2-l<br>------------------------------------------</div>
            <p>And after around 30 minutes:</p>
            <div class='code-block'>Output located in: &ltYour path&gt//test.1<br>------------------------------------------<br>Thank you for using AptaDesign</div>
            <p>And in your output directory you should find the following 3 files with contents similar as the following:</p>
            <ul>
              <li><b>test.1.log</b>
                <div id='log-img'></div></li>
              <li><b>test.1_results.xlsx</b>
                <div id='xlsx-img'></div></li>
              <li><b>test.1_fig.png</b>
                <div id='fig-img'></div></li>
            </ul>
            <p>If this test shows any errors please go through the installation again.</p>
          </div>
          <br>
        </div>
      </div>
      <div class='col-xs-12'>
        <div id='Usage' class='single-element'>
          <h3 id='sec-title' class='text-center'>Usage</h3>
          <div id='interface'>
            <span class='subtitle'>2.1. Using the interface mode</span>
            <p>In order to start the software in the User Interface mode, type the following command:</p>
            <div class='code-block'>$ python3 AptaDesign.py</div>
            <p>And follow the instructions as they are promted the terminal. It will ask for the input fasta or fastq file, number of motifs to use for the evaluation, pool size (number of sequences generated per cycle) to use, number of generations (cycles) to simulate, number of candidates (number of sequences selected per cycle), number of generations without score increase to stop the program, hybridation target (if desired), the path to save the output, title of the project and wether to generate graphs.  If you enter to Advanced Options you can enter the minumum length of the aptamers, the number of generations per hyperdiverse period, the maximum number of consecutive hyperdiverse periods before stopping the program and the minimum score that will cause the program to stop.</p>
          </div>
          <br>
          <div id='function'>
            <span class='subtitle'>2.2. Using the function mode</span>
            <p>In order to start the software in the function mode, type the following command:</p>
            <div class='code-block'>$ python3 -c "from AptaDesign import AptaDesign; AptaDesign(&lt<b>OPTIONS</b>&gt)"</div>
            <p>With the options shown bellow.</p>
            <p class='note'><b>Options:</b> Enter the options separated by commas (,), assign the options values using the equal sign (=). Example: AptaDesign(fasta_file='./examples/Fc_Aptamers.fasta,n_gen=1000)</p>
            <p class='note'>For the options not marked as required, if no value is provided, the default value will be used.</p>
            <p class='note'><b>Important: non-numerical values:</b> For the options that require non-numerical values, input them between single quotes (')</p>
            <div class='option-box' id='options'>
              <div class='options-title'>Options for the function mode</div>
              <ul>
                <li><b>fasta_file</b>:<i>(required)</i> The path to the fasta or fastq file containing the sequences from which the algorithm will extract the motifs.</li>
                <li><b>n_conserved_seqs</b>: The number of motifs to be used for the evaluation. <i>(default: 8)</i></li>
                <li><b>Hybridation_target</b>:<i>(optional)</i> The sequence of a hybridation oligonucleotide target if desired.</li>
                <li><b>n_pool</b>: Number of sequences to generate per cycle. <i>(default: 100)</i></li>
                <li><b>n_gen</b>: Number of cycles to simulate. <i>(default: 1000)</i></li>
                <li><b>n_candidates</b>: Number of sequences to select after each cycle. <i>(default: 10)</i></li>
                <li><b>min_length</b>: Minimum length of the apatmers. <i>(default: 10)</i></li>
                <li><b>hyperdiverse_generations</b>: Number of subgenerations per hyperdiverse period. <i>(default: 3)</i></li>
                <li><b>max_consecutive_hyperdiverse</b>: Maximum number of consicutive hyperdiverse periods. <i>(default: 10)</i></li>
                <li><b>max_consecutive_score</b>: Maximum number of consecutive generations without score improvement before stopping the program. <i>(default: 10)</i></li>
                <li><b>visualize</b>: ('T'/'F') Generate graphs for the project. <i>(default: 'True')</i></li>
                <li><b>break_score</b>: Minimum score that will cause the program to stop. <i>(default: 0.99)</i></li>
                <li><b>output_path</b>:<i>(required)</i> Path to save the output of the project.</li>
                <li><b>output_name</b>:<i>(required)</i> Name of the project. </li>
              </ul>
            </div>
          </div>
          <br>
          <div id='output'>
            <span class='subtitle'>2.3. Output</span>
            <p>After the succeful run of the algorithm, a folder with the name of the project is created on the given output directory. This folder contains the following files</p>
            <ul>
              <li><b>A log file:</b> Containing messages generated during the execution with timestamps.</li>
              <li><b>A png image:</b> A graph of each generation vs. maximum score acgieved.</li>
              <li><b>A xlsx file:</b> Containing the final selected candidates, their score and the values used for the calculation of the score</li>
            </ul>
            <p>For a more detailed description of the output files, please consult the <a href='../../documentation/index.html#output'>documentation</a>.</p>
          </div>
          <br>
        </div>
      </div>
    </div>
  </div>
  <footer class="panel-footer">
    <div class="container">
      <div class="row">
        <section id="cite" class="col-sm-6">
          <span id='cite-title'>Please cite:</span><br>
          <p id='citation'>Rueda-Silva J.C. (2021)</p>
          <hr class="visible-xs">
        </section>
        <section id="contact" class="col-sm-6">
          <span id='contact-title'>Contact:</span><br>
          <a href='mailto:jcarlosruedasilva@gmail.com' id='email'>jcarlosruedasilva@gmail.com</a>
        </section>
      </div>
    </div>
  </footer>
</body>
</html>
